<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Renaud Pawlak renaud.pawlak@cincheo.fr http://www.sh3d.online " />
  <title>Sweet Home 3D Online - User guide Version 1.x</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="sh3d.online.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Sweet Home 3D Online - User guide<br />
<span>Version 1.x</span></h1>
<p class="author">Renaud Pawlak<br />
<span>renaud.pawlak@cincheo.fr</span><br />
<span>http://www.sh3d.online</span><br /></p>
</header>
<h1 class="unnumbered" id="introduction">Introduction</h1>
<p>Sweet Home 3D™ is a 2D/3D floor planning and plan editor/viewer Open Source software. It has been developed by Emmanuel Puybaret (eTeks) for the last 15 years and has a strong and active community.</p>
<p>Sweet Home 3D JS is also Open Source and is the Web version of Sweet Home 3D. It has been co-developed by Emmanuel Puybaret (eTeks) and Renaud Pawlak (Cinchéo). A demo version can be found at <a href="http://www.sweethome3d.com/SweetHome3DOnlineManager.jsp">http://www.sweethome3d.com/SweetHome3DOnlineManager.jsp</a>.</p>
<p>The Sweet Home 3D Online™ product (SH3DO™ for short) allows businesses to take advantage of Sweet Home 3D and Sweet Home 3D JS. It provides a ready-to-use server and an Web-Service-based API for easy integration in any web site. The constraints of the Open Source licensing are relaxed so that one can fully customize the product for its own constraints and needs.</p>
<p>SH3DO™ comes with the following characteristics:</p>
<ul>
<li><p>2D plan editor and 3D viewer</p></li>
<li><p>Easy ecommerce website integration (pure HTML/Javascript, frameworkless)</p></li>
<li><p>Cloud server (for serving the viewer component + reading and saving project files)</p></li>
<li><p>Licensing includes basic maintenance</p></li>
<li><p>Sweet Home 3D server is a JSP (Java - Tomcat) server running on a Linux instance - it is usually hosted on AWS, but we may adapt the hosting to adapt to the retailer’s constraints</p></li>
<li><p>Full customization allowed (brand, colors, layout, etc)</p></li>
<li><p>Furniture / object catalog customization from retailer’s website</p></li>
<li><p>Custom developments and fine-tuning allowed in the context of the license</p></li>
<li><p>Unlimited projects per user</p></li>
</ul>
<p>This document aims at providing the technical documentation to integrate and customize SH3DO™ in your own Web site. It requires basic Web programming knowledge. If you do not have programming knowledge in house, Cinchéo provides development services in order to help you with SH3DO™ integration and customization.</p>
<h1 id="getting-started">Getting started</h1>
<h2 id="registration-and-retailer-keys">Registration and Retailer Keys</h2>
<p>The commercial licensing of Sweet Home 3D Online is brought to you by Cinchéo / eTeks. This license allows you to tune the Sweet Home 3D Online product and integrate it in a website. Once you have purchased a license, you will get a Retailer Key that will allow you to access one of the available servers (environments).</p>
<p>For each environment, a Retailer Key is bound to a Domain Name (for instance <a href="https://mycompany.com">https://mycompany.com</a>), which is the domain that host the web site you want to integrate SH3DO with. Any request coming from another origin than the declared domain name will not be allowed.</p>
<p>Note that the communication between your web site and the SH3DO services is secured with CORS and HTTPS.</p>
<h2 id="environments-dev-preprod-prod">Environments (dev, preprod, prod)</h2>
<p>Your Retailer Key will allow you to securely access the following environments:</p>
<ul>
<li><p>Your development environment (<a href="https://dev.sh3d.online">https://dev.sh3d.online</a>). This environment will accept requests with your Retailer Key coming only from <a href="http://localhost:8000">http://localhost:8000</a> or <a href="http://localhost:8080">http://localhost:8080</a>. It is to be used for development and debugging purposes only. Data and files may be erased at any time and should be stored for testing purpose.</p></li>
<li><p>Your pre-production/QA environment (<a href="https://preprod.sh3d.online">https://preprod.sh3d.online</a>). This optional environment will accept requests with your Retailer Key coming from the origin domain you will have declared to us. It is to be used for QA and testing purposes only. Data and files may be erased at any time and should be stored for testing purpose.</p></li>
<li><p>Your production environment (<a href="https://prod.sh3d.online">https://prod.sh3d.online</a>). This is the actual environment, which will accept requests with your Retailer Key coming from the origin domain you will have declared to us. User data will be safely backed-up and will remain there as long as you need it and hold a valid license.</p></li>
</ul>
<h2 id="the-demo-environment">The Demo environment</h2>
<p>For testing the API without having your Retailer Key available yet, you may access the demo environment, which is open to everyone and can be used with the Retailer Key 12345.</p>
<p>The following code shows a typical example to show a full SH3DO plan editor / 3D view / Furniture catalog using the 12345 Retailer Key on the demo server.</p>
<div class="sourceCode" id="cb1" data-language="html"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="kw">&lt;meta</span><span class="ot"> http-equiv=</span><span class="st">&quot;Content-Type&quot;</span><span class="ot"> content=</span><span class="st">&quot;text/html; charset=UTF-8&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="kw">&lt;meta</span><span class="ot"> http-equiv=</span><span class="st">&quot;X-UA-Compatible&quot;</span><span class="ot"> content=</span><span class="st">&quot;IE=edge&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a><span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;minimal-ui, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;format-detection&quot;</span><span class="ot"> content=</span><span class="st">&quot;telephone=no&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a><span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;msapplication-tap-highlight&quot;</span><span class="ot"> content=</span><span class="st">&quot;no&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a><span class="kw">&lt;title&gt;</span>SweetHome3DJS Test<span class="kw">&lt;/title&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/big.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/gl-matrix-min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/jszip.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/jsXmlSaxParser.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/core.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/geom.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/stroke.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/swingundo.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/batik-svgpathparser.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/triangulator.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/graphics2d.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;https://demo.sh3d.online/lib/sweethome3d.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a><span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> type=</span><span class="st">&quot;text/css&quot;</span><span class="ot"> href=</span><span class="st">&quot;https://demo.sh3d.online/css/sweethome3d.css&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a><span class="kw">&lt;style</span><span class="ot"> type=</span><span class="st">&quot;text/css&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a><span class="co">/* Add your own styles here */</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a><span class="kw">&lt;/style&gt;</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;home-pane&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a>  <span class="kw">&lt;canvas</span><span class="ot"> id=</span><span class="st">&quot;home-3D-view&quot;</span><span class="ot"> style=</span><span class="st">&quot;background-color: #CCCCCC;&quot;</span> </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a><span class="ot">          tabIndex=</span><span class="st">&quot;1&quot;</span><span class="kw">&gt;&lt;/canvas&gt;</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a>  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;home-plan&quot;</span><span class="ot"> style=</span><span class="st">&quot;background-color: #FFFFFF; color: #000000&quot;</span>         </span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a><span class="ot">          tabIndex=</span><span class="st">&quot;2&quot;</span> <span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true"></a>  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;home-pane-toolbar&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true"></a>  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;furniture-catalog&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true"></a><span class="kw">&lt;/div&gt;</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true"></a><span class="kw">var</span> homeName <span class="op">=</span> <span class="st">&quot;HomeTest&quot;</span><span class="op">;</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true"></a><span class="kw">var</span> urlBase <span class="op">=</span> <span class="st">&quot;https://demo.sh3d.online/&quot;</span><span class="op">;</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true"></a><span class="kw">var</span> application <span class="op">=</span> <span class="kw">new</span> <span class="fu">SweetHome3DJSApplication</span>(</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true"></a>    {<span class="dt">readHomeURL</span><span class="op">:</span>       urlBase <span class="op">+</span> <span class="st">&quot;api/readHome/12345/test?home=%s&quot;</span><span class="op">,</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true"></a>     <span class="dt">writeHomeEditsURL</span><span class="op">:</span> urlBase <span class="op">+</span> <span class="st">&quot;api/writeHomeEdits/12345/test?home=%s&quot;</span><span class="op">,</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true"></a>     <span class="co">//closeHomeURL:      urlBase + &quot;closeHome.jsp?home=%s&quot;,</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true"></a>     <span class="dt">pingURL</span><span class="op">:</span>           urlBase <span class="op">+</span> <span class="st">&quot;api/ping&quot;</span><span class="op">,</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true"></a>     <span class="dt">furnitureCatalogURLs</span><span class="op">:</span> [urlBase <span class="op">+</span> <span class="st">&quot;lib/resources/DefaultFurnitureCatalog.json&quot;</span>]<span class="op">,</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true"></a>     <span class="dt">furnitureResourcesURLBase</span><span class="op">:</span> urlBase<span class="op">,</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true"></a>     <span class="dt">autoWriteDelay</span><span class="op">:</span>    <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true"></a>     <span class="dt">autoWriteTrackedStateChange</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true"></a>     <span class="dt">writingObserver</span><span class="op">:</span>   {</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true"></a>         <span class="dt">writeStarted</span><span class="op">:</span> <span class="kw">function</span>(update) {</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true"></a>           <span class="bu">console</span><span class="op">.</span><span class="fu">info</span>(<span class="st">&quot;Update started&quot;</span><span class="op">,</span> update)<span class="op">;</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true"></a>         }<span class="op">,</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true"></a>         <span class="dt">writeSucceeded</span><span class="op">:</span> <span class="kw">function</span>(update) {</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true"></a>           <span class="bu">console</span><span class="op">.</span><span class="fu">info</span>(<span class="st">&quot;Update succeeded&quot;</span><span class="op">,</span> update)<span class="op">;</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true"></a>         }<span class="op">,</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true"></a>         <span class="dt">writeFailed</span><span class="op">:</span> <span class="kw">function</span>(update<span class="op">,</span> errorStatus<span class="op">,</span> errorText) {</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true"></a>           <span class="bu">console</span><span class="op">.</span><span class="fu">info</span>(<span class="st">&quot;Update failed&quot;</span><span class="op">,</span> update)<span class="op">;</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true"></a>         }<span class="op">,</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true"></a>         <span class="dt">connectionFound</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true"></a>           <span class="bu">console</span><span class="op">.</span><span class="fu">info</span>(<span class="st">&quot;Back to online mode&quot;</span>)<span class="op">;</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true"></a>         }<span class="op">,</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true"></a>         <span class="dt">connectionLost</span><span class="op">:</span> <span class="kw">function</span>(errorStatus<span class="op">,</span> errorText) {</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true"></a>           <span class="bu">console</span><span class="op">.</span><span class="fu">info</span>(<span class="st">&quot;Lost server connection - going offline&quot;</span>)<span class="op">;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true"></a>         }</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true"></a>       }</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true"></a>    })<span class="op">;</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true"></a><span class="co">// Set a few settings</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true"></a>application<span class="op">.</span><span class="fu">getUserPreferences</span>()<span class="op">.</span><span class="fu">setNewRoomFloorColor</span>(<span class="bn">0xFF9999A0</span>)<span class="op">;</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true"></a>application<span class="op">.</span><span class="fu">getUserPreferences</span>()<span class="op">.</span><span class="fu">setAerialViewCenteredOnSelectionEnabled</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true"></a></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true"></a><span class="co">// Read and display test file </span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true"></a>application<span class="op">.</span><span class="fu">getHomeRecorder</span>()<span class="op">.</span><span class="fu">readHome</span>(homeName<span class="op">,</span> </span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true"></a>    {</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true"></a>      <span class="dt">homeLoaded</span><span class="op">:</span> <span class="kw">function</span>(home) {</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true"></a>        home<span class="op">.</span><span class="fu">setName</span>(homeName)<span class="op">;</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true"></a>        application<span class="op">.</span><span class="fu">addHome</span>(home)<span class="op">;</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true"></a>        </span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true"></a>        <span class="co">// </span><span class="al">TODO</span><span class="co"> Should be performed in HomeController.close</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true"></a>        <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;unload&quot;</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true"></a>            application<span class="op">.</span><span class="fu">deleteHome</span>(home)<span class="op">;</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true"></a>          })<span class="op">;</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true"></a>      }<span class="op">,</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true"></a>      <span class="dt">homeError</span><span class="op">:</span> <span class="kw">function</span>(err) {</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(err)<span class="op">;</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true"></a>      }<span class="op">,</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true"></a>      <span class="dt">progression</span><span class="op">:</span> <span class="kw">function</span>(part<span class="op">,</span> info<span class="op">,</span> percentage) {</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true"></a>      }</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true"></a>    })<span class="op">;</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true"></a><span class="kw">&lt;/script&gt;</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true"></a></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<h1 id="integration-and-customization-examples">Integration and Customization examples</h1>
<p>One can integrate SH3DO with any web site. Integration requires the following:</p>
<p>- Use the REST API to a SH3DO server to connect, create users, create and save plans, and so on, - Use the JavaScript API to create the components and customize the behavior, - Use HTML and CSS to customize the page layout, tune the Look and Feel, and integrate the SH3DO components in your web site.</p>
<h1 id="api">API</h1>
<h2 id="rest-api">REST API</h2>
<h3 id="service-registeruser">Service <code>registerUser</code></h3>
<p>This web service creates a new user for a given retailer on the server. Once created, a use will have a space on the server to create new homes (see createNewHome).</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Path</th>
<th style="text-align: left;"><code>registerUser/retailerKey/userId</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HTTP method</td>
<td style="text-align: left;">GET</td>
</tr>
<tr class="even">
<td style="text-align: left;">Parameters</td>
<td style="text-align: left;"><ul>
<li><p><code>retailerKey</code> (path parameter): the retailer key</p></li>
<li><p><code>userId</code> (path parameter): the new user id (must not exist yet)</p></li>
</ul></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Result</td>
<td style="text-align: left;">status object (JSON)</td>
</tr>
</tbody>
</table>
<h3 id="service-ping">Service <code>ping</code></h3>
<p>This web service may be used by the client to check the server availability.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Path</th>
<th style="text-align: left;"><code>ping</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HTTP method</td>
<td style="text-align: left;">GET</td>
</tr>
<tr class="even">
<td style="text-align: left;">Parameters</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Result</td>
<td style="text-align: left;">status object (JSON)</td>
</tr>
</tbody>
</table>
<h3 id="service-createnewhome">Service <code>createNewHome</code></h3>
<p>This web service creates a new home for the given user.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Path</th>
<th style="text-align: left;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HTTP method</td>
<td style="text-align: left;">GET</td>
</tr>
<tr class="even">
<td style="text-align: left;">Parameters</td>
<td style="text-align: left;"><ul>
<li><p><code>retailerKey</code> (path parameter): the retailer key</p></li>
<li><p><code>userId</code> (path parameter): the user id, belonging to the retailer, as provided to registerUser</p></li>
<li><p><code>homeName</code> (path parameter): the home name (should not contain special characters or accents to avoid potential Locale issues)</p></li>
</ul></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Result</td>
<td style="text-align: left;">status object (JSON)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Errors</td>
<td style="text-align: left;"><ul>
<li><p><code>IOException</code>: if home already exists of if a problem occurs while creating the new home file on the server</p></li>
<li><p><code>RecorderException</code>: if Sweet Home 3D recorder fails at creating a new empty home</p></li>
</ul></td>
</tr>
</tbody>
</table>
<h3 id="service-readhome">Service <code>readHome</code></h3>
<p>This web service reads the given home on the server and downloads it in SH3D file format. It is to be used by a Sweet Home 3D JavaScript client.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Path</th>
<th style="text-align: left;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HTTP method</td>
<td style="text-align: left;">POST</td>
</tr>
<tr class="even">
<td style="text-align: left;">Parameters</td>
<td style="text-align: left;"><ul>
<li><p><code>retailerKey</code> (path parameter): the retailer key</p></li>
<li><p><code>userId</code> (path parameter): the user id, belonging to the retailer, as provided to registerUser</p></li>
<li><p><code>homeName</code> (form/header parameter): the home name, as provided to <code>createNewHome</code></p></li>
</ul></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Result</td>
<td style="text-align: left;">a byte stream containing the home file in binary format</td>
</tr>
<tr class="even">
<td style="text-align: left;">Errors</td>
<td style="text-align: left;"><ul>
<li><p><code>IOException</code>: if home does not exist or if a system error occurs while reading the file</p></li>
</ul></td>
</tr>
</tbody>
</table>
<h3 id="service-writehomeedits">Service <code>writeHomeEdits</code></h3>
<p>This web service is called by the JavaScript client to update a given home with a list of edits performed by the user.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Path</th>
<th style="text-align: left;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HTTP method</td>
<td style="text-align: left;">POST</td>
</tr>
<tr class="even">
<td style="text-align: left;">Parameters</td>
<td style="text-align: left;"><ul>
<li><p><code>retailerKey</code> (path parameter): the retailer key</p></li>
<li><p><code>userId</code> (path parameter): the user id, belonging to the retailer, as provided to registerUser</p></li>
<li><p><code>homeName</code> (form/header parameter): the home name, as provided to <code>readHome</code></p></li>
<li><p><code>edits</code> (form/header parameter): the list of edits to apply to the home</p></li>
</ul></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Result</td>
<td style="text-align: left;">a result object containing the count of applied edits (JSON)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Errors</td>
<td style="text-align: left;"><ul>
<li><p><code>Throwable</code>: if any of the parameter is wrong or if the edits are not consistent with the target home</p></li>
</ul></td>
</tr>
</tbody>
</table>
</body>
</html>
